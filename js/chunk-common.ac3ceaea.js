"use strict";(globalThis["webpackChunktbls"]=globalThis["webpackChunktbls"]||[]).push([[996],{5677:(e,l,t)=>{t.d(l,{A:()=>_});var a=t(1758),o=t(2901),s=t(555);const d={class:"row items-center justify-end"},n={key:0,class:"truncate-cell"},u={key:1,class:"truncate-cell"},i={__name:"EditableCell",props:{row:Object,field:String,label:String,rules:Array,mask:String,maxLength:Number,editId:[String,Number],modelValue:[String,Number,Boolean],translate:{type:Boolean,default:!1},options:{type:Array,default:()=>[]},booleanField:{type:Boolean,default:()=>!1},optionsLabel:{type:String,default:"label"},optionsValue:{type:String,default:"value"},dateField:{type:Boolean,default:()=>!1}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,i=l,r=(0,a.EW)((()=>t.row.id===t.editId)),p=(0,s.KR)(t.modelValue??"");function c(e){i("update:modelValue",e)}(0,a.wB)((()=>t.modelValue),(e=>{p.value=e??""}));const m=(0,a.EW)((()=>{const e=t.row[t.field];return e?"string"!==typeof e?e:e.length>55?e.slice(0,55)+"...":e:""}));return(l,s)=>{const i=(0,a.g2)("q-btn"),v=(0,a.g2)("q-date"),g=(0,a.g2)("q-popup-proxy"),b=(0,a.g2)("q-icon"),y=(0,a.g2)("q-input"),k=(0,a.g2)("q-select"),h=(0,a.g2)("q-td"),w=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{props:t,key:t.field,class:"edit-input"},{default:(0,a.k6)((()=>[r.value?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[t.dateField?((0,a.uX)(),(0,a.Wv)(y,{key:0,dense:"",outlined:"",modelValue:p.value,"onUpdate:modelValue":[s[1]||(s[1]=e=>p.value=e),c],label:e.label,mask:"date",rules:e.rules,"lazy-rules":"",maxlength:10},{append:(0,a.k6)((()=>[(0,a.bF)(b,{name:"sym_r_event",color:"primary",class:"cursor-pointer"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:p.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>p.value=e),c]},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.bo)((0,a.bF)(i,{unelevated:"",label:"Close",color:"primary",flat:""},null,512),[[w]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","label","rules"])):t.booleanField?((0,a.uX)(),(0,a.Wv)(k,{key:1,dense:"",outlined:"",modelValue:p.value,"onUpdate:modelValue":[s[2]||(s[2]=e=>p.value=e),c],label:e.label,options:t.options,"option-label":"label","option-value":"value","emit-value":"","map-options":"",rules:e.rules,"lazy-rules":""},null,8,["modelValue","label","options","rules"])):t.options.length?((0,a.uX)(),(0,a.Wv)(k,{key:2,dense:"",outlined:"",modelValue:p.value,"onUpdate:modelValue":[s[3]||(s[3]=e=>p.value=e),c],label:e.label,options:t.options,"option-label":t.optionsLabel,"option-value":t.optionsValue,"emit-value":"","map-options":""},null,8,["modelValue","label","options","option-label","option-value"])):((0,a.uX)(),(0,a.Wv)(y,{key:3,dense:"",outlined:"",modelValue:p.value,"onUpdate:modelValue":[s[4]||(s[4]=e=>p.value=e),c],label:e.label,rules:e.rules,"lazy-rules":"",mask:e.mask,maxlength:e.maxLength||255},null,8,["modelValue","label","rules","mask","maxlength"]))],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[t.booleanField?((0,a.uX)(),(0,a.CE)("div",n,(0,o.v_)(p.value?l.$t("index.yes"):l.$t("index.no")),1)):((0,a.uX)(),(0,a.CE)("div",u,(0,o.v_)(e.translate?l.$t(m.value):m.value),1))],64))])),_:1},8,["props"])}}};var r=t(2807),p=t(5262),c=t(9270),m=t(492),v=t(1356),g=t(8462),b=t(6384),y=t(4940),k=t(8672),h=t(8582),w=t.n(h);const f=(0,r.A)(i,[["__scopeId","data-v-4336cf7c"]]),_=f;w()(i,"components",{QTd:p.A,QInput:c.A,QIcon:m.A,QPopupProxy:v.A,QDate:g.A,QBtn:b.A,QSelect:y.A}),w()(i,"directives",{ClosePopup:k.A})},6396:(e,l,t)=>{t.d(l,{A:()=>f});var a=t(1758),o=t(2901);const s={class:"row items-center"},d={class:"text-grey-7",style:{"min-width":"150px","font-weight":"500"}},n={class:"text-body1",style:{flex:"1","white-space":"pre-line","word-break":"break-word"}},u={__name:"ViewDialog",props:{modelValue:Boolean,data:Object,goodstype:{type:String,default:""}},emits:["update:modelValue"],setup(e){return(l,t)=>{const u=(0,a.g2)("q-space"),i=(0,a.g2)("q-tooltip"),r=(0,a.g2)("q-btn"),p=(0,a.g2)("q-bar"),c=(0,a.g2)("q-separator"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),b=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>l.$emit("update:modelValue",e)),"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"shadow-24 column no-wrap",style:{"max-height":"90vh","max-width":"500px",width:"90vw"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"bg-primary text-white rounded-borders",style:{height:"50px","flex-shrink":"0"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(l.$t(`goods.view_goods${e.goodstype}.view_goods${e.goodstype}_tip`))+" ",1),(0,a.bF)(u),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(r,{dense:"",flat:"",icon:"sym_r_close"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"bg-gray text-white shadow-4"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(l.$t("index.close")),1)])),_:1})])),_:1})),[[b]])])),_:1}),(0,a.bF)(m,{class:"scroll",style:{"overflow-y":"auto",flex:"1"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data,((t,u)=>((0,a.uX)(),(0,a.CE)("div",{key:u,class:"q-py-sm"},[(0,a.Lk)("div",s,[(0,a.Lk)("div",d,(0,o.v_)(l.$t(`goods.view_goods${e.goodstype}.${u}`)),1),(0,a.Lk)("div",n,(0,o.v_)(t||"-"),1)]),(0,a.bF)(c,{spaced:""})])))),128))])),_:1})])),_:1})])),_:1},8,["model-value"])}}};var i=t(2156),r=t(3316),p=t(8670),c=t(3676),m=t(6384),v=t(7410),g=t(4189),b=t(386),y=t(8672),k=t(8582),h=t.n(k);const w=u,f=w;h()(u,"components",{QDialog:i.A,QCard:r.A,QBar:p.A,QSpace:c.A,QBtn:m.A,QTooltip:v.A,QCardSection:g.A,QSeparator:b.A}),h()(u,"directives",{ClosePopup:y.A})},7144:(e,l,t)=>{t.d(l,{Fd:()=>s,e7:()=>d});t(310),t(5962),t(95),t(2802);var a=t(1271);const{getauth:o}=t(2261);async function s(e=!1){const l=["customer","company","goods","goodstype"];await Promise.all(l.map((async l=>{if(!a.A.has(l)||e){const e=await o(`${l}?nopage=true`);a.A.set(`${l}`,e.data)}})))}async function d(e,l=null,t=null){const s=t||e;let d=null;const u=a.A.getItem(s)||[];u&&u.length>0&&(d=u.reduce(((e,l)=>{const t=l.update_time;return t>e?t:e})).update_time);let i=`${e}?nopage=true`;l&&(i=`${e}?page=${l}`),d&&(i+=`${i.includes("?")?"&":"?"}updated_after=${d}`);const r=await o(i),p=r.data||r.results?.data||[],c=n(u,p),m=r.deletedIds||[],v=c.filter((e=>!m.includes(e.id)));a.A.set(s,v),console.log(`ðŸ”„ ${s} cache updated with ${p.length} new items.`)}function n(e,l){const t=new Map;return[...e,...l].forEach((e=>{t.set(e.id,e)})),Array.from(t.values()).sort(((e,l)=>e.id>l.id?-1:e.id<l.id?1:0))}},9571:(e,l,t)=>{t.d(l,{A:()=>f});var a=t(1758),o=t(2901);const s={class:"row items-center"},d={class:"text-grey-7",style:{"min-width":"160px","font-weight":"500"}},n={class:"text-body1",style:{flex:"1","white-space":"pre-line","word-break":"break-word"}},u={__name:"ViewDialog",props:{modelValue:Boolean,data:Object,trucktype:{type:String,default:""}},emits:["update:modelValue"],setup(e){return(l,t)=>{const u=(0,a.g2)("q-space"),i=(0,a.g2)("q-tooltip"),r=(0,a.g2)("q-btn"),p=(0,a.g2)("q-bar"),c=(0,a.g2)("q-separator"),m=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),b=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{"model-value":e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>l.$emit("update:modelValue",e)),"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"shadow-24 column no-wrap",style:{"max-height":"90vh","max-width":"500px",width:"90vw"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"bg-primary text-white rounded-borders",style:{height:"50px","flex-shrink":"0"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(l.$t("truck.view_truckdriver.view_truckdriver_tip"))+" ",1),(0,a.bF)(u),(0,a.bo)(((0,a.uX)(),(0,a.Wv)(r,{dense:"",flat:"",icon:"sym_r_close"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{class:"bg-gray text-white shadow-4"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(l.$t("index.close")),1)])),_:1})])),_:1})),[[b]])])),_:1}),(0,a.bF)(m,{class:"scroll",style:{"overflow-y":"auto",flex:"1"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.data,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"q-py-sm"},[(0,a.Lk)("div",s,[(0,a.Lk)("div",d,(0,o.v_)(l.$t(`truck.view_truckdriver.${t}`)),1),(0,a.Lk)("div",n,(0,o.v_)(e||"-"),1)]),(0,a.bF)(c,{spaced:""})])))),128))])),_:1})])),_:1})])),_:1},8,["model-value"])}}};var i=t(2156),r=t(3316),p=t(8670),c=t(3676),m=t(6384),v=t(7410),g=t(4189),b=t(386),y=t(8672),k=t(8582),h=t.n(k);const w=u,f=w;h()(u,"components",{QDialog:i.A,QCard:r.A,QBar:p.A,QSpace:c.A,QBtn:m.A,QTooltip:v.A,QCardSection:g.A,QSeparator:b.A}),h()(u,"directives",{ClosePopup:y.A})}}]);