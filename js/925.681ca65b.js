"use strict";(globalThis["webpackChunktbls"]=globalThis["webpackChunktbls"]||[]).push([[925],{2925:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var o=a(1758),l=a(6683),n=a(2901);const i={key:0},r={class:"top-header"},d={class:"header-items"},s={class:"header-item"},u={class:"header-item"},v={class:"header-item"},c={class:"header-item"},m={key:1},y={class:"bottom-footer"},g={class:"footer-item"},p={class:"footer-item"},_={class:"footer-item"},b={key:1,class:"empty-state"};function f(e,t,a,f,h,w){const k=(0,o.g2)("q-tooltip"),I=(0,o.g2)("q-btn"),N=(0,o.g2)("q-btn-group"),A=(0,o.g2)("q-icon"),F=(0,o.g2)("q-td"),q=(0,o.g2)("q-input"),W=(0,o.g2)("q-tr"),S=(0,o.g2)("q-table"),C=(0,o.g2)("q-space"),x=(0,o.g2)("q-bar"),D=(0,o.g2)("q-card-section"),L=(0,o.g2)("q-card-actions"),E=(0,o.g2)("q-card"),$=(0,o.g2)("q-dialog"),Q=(0,o.gN)("close-popup");return f.inventoryItemSelectedData?((0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(l.eB,{appear:"","enter-active-class":"animated fadeIn"},{default:(0,o.k6)((()=>[(0,o.bF)(S,{separator:"cell",class:"my-sticky-header-column-table shadow-24",rows:f.tableList,"row-key":"id",loading:f.loading,columns:f.columns,"no-data-label":"No data","no-results-label":"No data you want",style:{height:"calc(100vh - 150px)","max-height":"calc(100vh - 150px)"},flat:"",bordered:"","rows-per-page-options":[0]},{top:(0,o.k6)((()=>[(0,o.Lk)("div",r,[(0,o.bF)(N,{push:""},{default:(0,o.k6)((()=>[(0,o.bF)(I,{dense:"",label:e.$t("refresh"),icon:"sym_r_refresh",padding:"6px 10px",onClick:f.reFresh},{default:(0,o.k6)((()=>[(0,o.bF)(k,(0,n._B)((0,o.Ng)(f.tooltip)),{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.$t("refreshtip")),1)])),_:1},16)])),_:1},8,["label","onClick"])])),_:1}),(0,o.Lk)("div",d,[(0,o.Lk)("div",s,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.code"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.inventoryItemSelectedData.code),1)]),(0,o.Lk)("div",u,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.customer"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.inventoryItemSelectedData.customer),1)]),(0,o.Lk)("div",v,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.date"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.inventoryItemSelectedData.received_date),1)]),(0,o.Lk)("div",c,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.company"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.inventoryItemSelectedData.company),1)])]),(0,o.bF)(N,{push:""},{default:(0,o.k6)((()=>[(0,o.bF)(I,{dense:"",label:e.$t("inventory.view_inventoryitemdetail.moreEdit"),onClick:f.MoreEdit,color:"primary","no-caps":"",padding:"6px 10px"},{default:(0,o.k6)((()=>[(0,o.bF)(A,{name:"sym_r_edit_square",size:"18px",class:"q-ml-xs"}),(0,o.bF)(k,(0,n._B)((0,o.Ng)(f.tooltip)),{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.moreEdit")),1)])),_:1},16)])),_:1},8,["label","onClick"])])),_:1})])])),body:(0,o.k6)((e=>[(0,o.bF)(W,{props:e},{default:(0,o.k6)((()=>[(0,o.bF)(F,{key:"code",props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.row.goods.code),1)])),_:2},1032,["props"]),(0,o.bF)(F,{key:"goods_name",props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.row.goods.name),1)])),_:2},1032,["props"]),(0,o.bF)(F,{key:"quantity",props:e,class:"edit-input"},{default:(0,o.k6)((()=>[e.row.id===f.editId?((0,o.uX)(),(0,o.Wv)(q,{key:0,dense:"",outlined:"",modelValue:f.editQuantity,"onUpdate:modelValue":[t[0]||(t[0]=e=>f.editQuantity=e),f.updateTotal],label:f.t("inventory.view_inventoryitemdetail.quantity"),rules:[f.validateIntValue],"lazy-rules":"",mask:"#####"},null,8,["modelValue","label","rules","onUpdate:modelValue"])):((0,o.uX)(),(0,o.CE)("div",m,(0,n.v_)(e.row.quantity),1))])),_:2},1032,["props"]),(0,o.bF)(F,{key:"rate",props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(f.formatNumber(e.row.goods.goods_rate)),1)])),_:2},1032,["props"]),(0,o.bF)(F,{key:"weight",props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(f.formatNumber(e.row.goods.goods_weight)),1)])),_:2},1032,["props"]),(0,o.bF)(F,{key:"totalWeight",props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(f.formatNumber(f.getRowQuantity(e.row)*Number(e.row.goods.goods_weight)))+" Vs ",1)])),_:2},1032,["props"]),(0,o.bF)(F,{key:"totalAmount",props:e},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(f.formatNumber(f.getRowQuantity(e.row)*Number(e.row.goods.goods_rate)))+" Ks ",1)])),_:2},1032,["props"]),(0,o.bF)(F,{key:"action",props:e,style:(0,n.Tr)([{width:"100px"},f.actionCellStyle(e)])},{default:(0,o.k6)((()=>[e.row.id!==f.editId?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(f.rowActions,(t=>((0,o.uX)(),(0,o.Wv)(I,(0,o.v6)({key:t.icon,ref_for:!0},t,{onClick:a=>t.action(e.row)}),{default:(0,o.k6)((()=>[(0,o.bF)(k,(0,o.v6)({ref_for:!0},f.tooltip),{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(t.tip),1)])),_:2},1040)])),_:2},1040,["onClick"])))),128)):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(f.editActions,(e=>((0,o.uX)(),(0,o.Wv)(I,(0,o.v6)({key:e.icon,ref_for:!0},e,{onClick:e.action}),null,16,["onClick"])))),128))])),_:2},1032,["props","style"])])),_:2},1032,["props"])])),bottom:(0,o.k6)((()=>[(0,o.Lk)("div",y,[(0,o.Lk)("div",g,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.acceptedBy"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.inventoryItemSelectedData.creator),1)]),(0,o.Lk)("div",p,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.grandTotalWeight"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.formatNumber(f.grandTotalWeight))+" "+(0,n.v_)(e.$t("inventory.view_inventoryitemdetail.viss")),1)]),(0,o.Lk)("div",_,[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventoryitemdetail.grandTotalAmount"))+": ",1),(0,o.Lk)("span",null,(0,n.v_)(f.formatNumber(f.grandTotalAmount))+" "+(0,n.v_)(e.$t("inventory.view_inventoryitemdetail.kyats")),1)])])])),_:1},8,["rows","loading","columns"])])),_:1}),(0,o.bF)($,{modelValue:f.deleteForm,"onUpdate:modelValue":t[1]||(t[1]=e=>f.deleteForm=e),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(E,{class:"shadow-24",style:{"max-width":"350px",width:"100%"}},{default:(0,o.k6)((()=>[(0,o.bF)(x,{style:{height:"50px"},class:"bg-primary text-white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.$t("inventory.view_inventorylist.deleteConfirmation"))+" ",1),(0,o.bF)(C),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(I,{dense:"",flat:"",icon:"sym_r_close"},{default:(0,o.k6)((()=>[(0,o.bF)(k,(0,n._B)((0,o.Ng)(f.tooltip)),{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(e.$t("index.close")),1)])),_:1},16)])),_:1})),[[Q]])])),_:1}),(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(f.t("deletetip")),1)])),_:1}),(0,o.bF)(L,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bF)(I,{flat:"",label:f.t("cancel"),onClick:f.deleteDataCancel},null,8,["label","onClick"]),(0,o.bF)(I,{color:"primary",label:f.t("delete"),onClick:f.deleteDataSubmit},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):((0,o.uX)(),(0,o.CE)("div",b,"NO DATA"))}a(310),a(5962),a(2802);var h=a(2261),w=a(1271),k=a(4907),I=a(555),N=a(3537),A=a(455);const F={name:"InventoryItemDetailPage",setup(){const{t:e}=(0,N.s9)(),t=(0,k.A)(),a=(0,A.rd)(),l="receivegoods",n=(0,I.KR)(!1),i=(0,I.KR)([]),r=(0,I.KR)(0),d=(0,I.KR)(!1),s=(0,I.KR)(!1),u=(0,I.KR)(0),v=(0,I.KR)(null),c=(0,I.KR)(0),m=e=>null!=e&&Number(e)>0,y=(0,o.EW)((()=>m(v.value))),g=(0,I.KR)(w.A.getItem("SelectedInventoryItemData")||null),p=e=>(new Intl.NumberFormat).format(Number(e||0)),_=(0,I.Kh)([{name:"code",label:e("inventory.view_inventoryitemdetail.goods_code"),field:"id",align:"center",headerStyle:"font-weight: bold; font-size: 13px"},{name:"goods_name",label:e("inventory.view_inventoryitemdetail.goods_name"),field:"goods_name",align:"center",headerStyle:"font-weight: bold; font-size: 13px"},{name:"quantity",label:e("inventory.view_inventoryitemdetail.quantity"),field:"quantity",align:"left",sortable:!0,headerStyle:"font-weight: bold; font-size: 13px"},{name:"rate",label:e("inventory.view_inventoryitemdetail.goods_rate"),field:"rate",align:"left",headerStyle:"font-weight: bold; font-size: 13px"},{name:"weight",label:e("inventory.view_inventoryitemdetail.goods_weight"),field:"weight",align:"left",headerStyle:"font-weight: bold; font-size: 13px"},{name:"totalWeight",label:e("inventory.view_inventoryitemdetail.totalWeight"),field:"totalWeight",align:"left",headerStyle:"font-weight: bold; font-size: 13px"},{name:"totalAmount",label:e("inventory.view_inventoryitemdetail.totalAmount"),field:"totalAmount",align:"left",headerStyle:"font-weight: bold; font-size: 13px"},{name:"action",label:e("action"),align:"left",headerStyle:"font-weight: bold; font-size: 13px"}]),b=(a=e("error.error"))=>{t.notify({message:a,icon:"sym_r_close",color:"negative"})},f=async()=>{try{t.loading.show(),n.value=!0;const e=await(0,h.getauth)(`${l}/?consignment=${g.value.id}&nopage=true`);"200"===e.code?i.value=e.data:b()}catch(e){b()}finally{t.loading.hide(),n.value=!1}},F=async()=>{n.value=!0,x(),await f(),n.value=!1},q=e=>{d.value=!0,r.value=e.id,v.value=Number(e.quantity)||0,c.value=Number(e.quantity)||0},W=e=>r.value===e.id?Number(v.value)||0:Number(e.quantity)||0,S=()=>{const e=i.value.findIndex((e=>e.id===r.value));-1!==e&&(i.value[e].quantity=Number(v.value)||0);const t=i.value.reduce(((e,t)=>e+Number(t.quantity)*Number(t.goods.goods_weight)),0),a=i.value.reduce(((e,t)=>e+Number(t.quantity)*Number(t.goods.goods_rate)),0);g.value.total_weight=t,g.value.total_amount=a,w.A.set("SelectedInventoryItemData",g.value),w.A.has("EditSelectedInventoryItemData")&&w.A.set("EditSelectedInventoryItemData",{consignment:g.value,goodsList:i.value})},C=async()=>{if(!y.value)return void t.notify({message:e("error.data_invalid"),icon:"sym_r_close",color:"negative"});const a=Number(v.value)!==Number(c.value);if(!a)return t.notify({message:e("warning.no_changes"),color:"warning"});let o;try{if(t.loading.show(),o=await(0,h.patchauth)(`${l}/${r.value}/`,{quantity:Number(v.value)}),"200"!==o.code)throw new Error;S(),x(),t.notify({message:e("successful.update"),color:"green"})}catch{b(e("error.update"))}finally{t.loading.hide()}},x=()=>{d.value=!1,r.value=0,v.value=null,c.value=0},D=e=>{s.value=!0,u.value=e},L=()=>{i.value=i.value.filter((e=>e.id!==u.value));const e=i.value.reduce(((e,t)=>e+Number(t.quantity)*Number(t.goods.goods_weight)),0),t=i.value.reduce(((e,t)=>e+Number(t.quantity)*Number(t.goods.goods_rate)),0);g.value.total_weight=e,g.value.total_amount=t,w.A.set("SelectedInventoryItemData",g.value),w.A.has("EditSelectedInventoryItemData")&&w.A.set("EditSelectedInventoryItemData",{consignment:g.value,goodsList:i.value})},E=async()=>{t.loading.show();try{const a=await(0,h.deleteauth)(`${l}/${u.value}/`);if("200"!==a.code)throw new Error;L(),t.notify({message:e("successful.delete"),color:"green"}),$()}catch{b(e("error.delete"))}finally{t.loading.hide()}},$=()=>{s.value=!1,u.value=0},Q=()=>{w.A.set("EditSelectedInventoryItemData",{consignment:g.value,goodsList:i.value}),a.push({name:"InventoryEdit"})},T=[{round:!0,flat:!0,push:!0,color:"amber-4",icon:"sym_r_edit",tip:e("edit"),action:q},{round:!0,flat:!0,push:!0,color:"amber-13",icon:"sym_r_delete",tip:e("delete"),action:e=>D(e.id)}],K=e=>d.value&&e.row.id===r.value?{backgroundColor:"#cbc6d2"}:{},R=[{round:!0,flat:!0,push:!0,color:"green",icon:"sym_r_check",action:C},{round:!0,flat:!0,push:!0,color:"red",icon:"sym_r_close",action:x}],V=e=>{const t=""===e||null===e?null:Number(e);v.value=Number.isFinite(t)?t:null},z={class:"bg-blue text-white shadow-4",offset:[10,10],contentStyle:"font-size: 12px"},X=(0,o.EW)((()=>i.value.reduce(((e,t)=>e+Number(t.quantity)*Number(t.goods.goods_weight)),0))),B=(0,o.EW)((()=>i.value.reduce(((e,t)=>e+Number(t.quantity)*Number(t.goods.goods_rate)),0)));return(0,o.sV)((()=>{f()})),{tooltip:z,loading:n,tableList:i,editId:r,editQuantity:v,editMode:d,deleteForm:s,deleteId:u,reFresh:F,editData:q,editDataSubmit:C,editDataCancel:x,deleteData:D,deleteDataSubmit:E,deleteDataCancel:$,columns:_,t:e,q:t,inventoryItemSelectedData:g,validateIntValue:m,isEditFormValid:y,MoreEdit:Q,actionCellStyle:K,editActions:R,rowActions:T,formatNumber:p,updateTotal:V,getRowQuantity:W,grandTotalWeight:X,grandTotalAmount:B}}};var q=a(2807),W=a(6653),S=a(6031),C=a(6384),x=a(7410),D=a(492),L=a(4488),E=a(5262),$=a(9270),Q=a(2156),T=a(3316),K=a(8670),R=a(3676),V=a(4189),z=a(2669),X=a(8672),B=a(8582),M=a.n(B);const U=(0,q.A)(F,[["render",f],["__scopeId","data-v-7c422fe2"]]),P=U;M()(F,"components",{QTable:W.A,QBtnGroup:S.A,QBtn:C.A,QTooltip:x.A,QIcon:D.A,QTr:L.A,QTd:E.A,QInput:$.A,QDialog:Q.A,QCard:T.A,QBar:K.A,QSpace:R.A,QCardSection:V.A,QCardActions:z.A}),M()(F,"directives",{ClosePopup:X.A})}}]);