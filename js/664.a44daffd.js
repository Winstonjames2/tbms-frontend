"use strict";(globalThis["webpackChunktbls"]=globalThis["webpackChunktbls"]||[]).push([[664],{6664:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Y});var a=t(1758),n=t(2901),i=t(6683);const o={class:"q-ml-auto"},s={class:"text-subtitle1 text-center q-mx-auto",style:{"text-transform":"capitalize","align-items":"center","align-self":"center"}};function u(e,l,t,u,r,d){const c=(0,a.g2)("q-tooltip"),m=(0,a.g2)("q-btn"),k=(0,a.g2)("q-toolbar-title"),g=(0,a.g2)("q-item-label"),_=(0,a.g2)("q-item"),p=(0,a.g2)("q-separator"),b=(0,a.g2)("q-item-section"),f=(0,a.g2)("q-list"),v=(0,a.g2)("q-menu"),h=(0,a.g2)("q-img"),y=(0,a.g2)("q-avatar"),A=(0,a.g2)("q-toolbar"),F=(0,a.g2)("q-header"),w=(0,a.g2)("q-icon"),I=(0,a.g2)("q-scroll-area"),x=(0,a.g2)("q-drawer"),C=(0,a.g2)("router-view"),q=(0,a.g2)("q-page-container"),R=(0,a.g2)("q-space"),L=(0,a.g2)("q-bar"),Q=(0,a.g2)("q-input"),K=(0,a.g2)("q-card-section"),W=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-card"),D=(0,a.g2)("q-dialog"),T=(0,a.g2)("q-layout"),$=(0,a.gN)("close-popup"),X=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.Wv)(T,{view:"hHh LpR fFf",style:(0,n.Tr)({height:u.q.screen.height,width:u.q.screen.width})},{default:(0,a.k6)((()=>[u.isDeviceSupported()?((0,a.uX)(),(0,a.Wv)(F,{key:0,reveal:"",class:"bg-primary",bordered:""},{default:(0,a.k6)((()=>[(0,a.bF)(A,null,{default:(0,a.k6)((()=>[(0,a.bF)(m,{flat:"",onClick:l[0]||(l[0]=e=>u.drawerleft=!u.drawerleft),dense:"",icon:u.drawerleft?"sym_r_left_panel_close":"sym_r_left_panel_open"},{default:(0,a.k6)((()=>[(0,a.bF)(c,(0,n._B)((0,a.Ng)(u.tooltip)),{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(u.drawerleft?e.$t("index.conceal_menu"):e.$t("index.show_menu")),1)])),_:1},16)])),_:1},8,["icon"]),(0,a.bF)(k,{shrink:"",class:"main-title",onClick:l[1]||(l[1]=e=>u.router.push({name:"web_index"}))},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.title")),1)])),_:1}),(0,a.Lk)("div",o,[(0,a.bF)(m,{round:"",dense:"",flat:"",icon:"sym_r_brightness_6",class:"q-mx-sm",color:"text",onClick:u.toggleTheme},{default:(0,a.k6)((()=>[(0,a.bF)(c,(0,n._B)((0,a.Ng)(u.tooltip)),{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.change_theme")),1)])),_:1},16)])),_:1},8,["onClick"]),(0,a.bF)(m,{round:"",dense:"",flat:"",icon:"sym_r_notifications",class:"q-mx-sm",color:"text"},{default:(0,a.k6)((()=>[(0,a.bF)(c,(0,n._B)((0,a.Ng)(u.tooltip)),{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.notifications")),1)])),_:1},16),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"min-width":"150px",padding:"5px","font-size":"0.8em"},class:"shadow-4"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{style:{"font-size":"1.3em"}},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.notifications")),1)])),_:1})])),_:1}),(0,a.bF)(p),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.recentNotifications,((e,l)=>((0,a.uX)(),(0,a.Wv)(_,{key:l,style:{padding:"0 5px"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(l+1+". "+e),1)])),_:2},1024)])),_:2},1024)))),128)),(0,a.bF)(p),(0,a.bF)(_,{clickable:"",onClick:e.seeMoreNotifications,style:{padding:"5px",color:"blue","text-decoration":"underline"}},{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.see_more")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(m,{round:"",dense:"",flat:"",icon:"sym_r_translate",class:"q-mx-sm",color:"text"},{default:(0,a.k6)((()=>[(0,a.bF)(c,(0,n._B)((0,a.Ng)(u.tooltip)),{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.translate")),1)])),_:1},16),(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{style:{"min-width":"100px"},class:"shadow-4"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.langOptions,((e,l)=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(_,{key:l,clickable:"",onClick:l=>u.langChange(e.value)},{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.label),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[$]]))),128))])),_:1})])),_:1})])),_:1})]),(0,a.bF)(p,{vertical:"",color:"primary",class:"q-my-xs"}),null!==u.displayName?((0,a.uX)(),(0,a.Wv)(m,{key:0,stretch:"",flat:"",color:"white-8",icon:"sym_r_account_circle"},{default:(0,a.k6)((()=>[(0,a.bF)(v,null,{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:"q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,{size:"60px",class:"q-mx-auto"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{src:"statics/icons/tb_icon.jpg"})])),_:1})])),_:1}),(0,a.bF)(p),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",s,(0,n.v_)(u.displayName),1)])),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)((()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(m,{color:"primary",label:e.$t("index.logout"),push:"",size:"sm",onClick:u.userLogout},{default:(0,a.k6)((()=>[(0,a.bF)(c,(0,n._B)((0,a.Ng)(u.tooltip)),{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.logout")),1)])),_:1},16)])),_:1},8,["label","onClick"])),[[$]])])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),null===u.displayName?((0,a.uX)(),(0,a.Wv)(m,{key:1,label:e.$t("index.login"),color:"primary",onClick:l[2]||(l[2]=e=>u.loginDialog=!0),style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.bF)(c,(0,n._B)((0,a.Ng)(u.tooltip)),{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("index.login_tip")),1)])),_:1},16)])),_:1},8,["label"])):(0,a.Q3)("",!0)])),_:1})])),_:1})):(0,a.Q3)("",!0),u.isDeviceSupported()?((0,a.uX)(),(0,a.Wv)(x,{key:1,modelValue:u.drawerleft,"onUpdate:modelValue":l[4]||(l[4]=e=>u.drawerleft=e),"show-if-above":"",width:220,breakpoint:500,class:"left-drawer"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{class:"fit"},{default:(0,a.k6)((()=>[(0,a.bF)(f,null,{default:(0,a.k6)((()=>["Admin"===u.userRole||"Staff"===u.userRole?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(_,{key:0,clickable:"",to:{name:"ViewDashboard"},active:"Dashboard"===u.link,onClick:l[3]||(l[3]=e=>u.linkChange("Dashboard")),class:(0,n.C4)(["menu-link",{"selected-menu-link":"Dashboard"===u.link}])},{default:(0,a.k6)((()=>[(0,a.bF)(b,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(w,{name:"sym_r_dashboard"})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("menuItem.dashboard")),1)])),_:1})])),_:1},8,["active","class"])),[[X]]):(0,a.Q3)("",!0),"Admin"===u.userRole||"Staff"===u.userRole?((0,a.uX)(),(0,a.Wv)(p,{key:1,spaced:""})):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.menuItems1,(l=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(_,{key:l.link,clickable:"",to:l.to,active:u.link===l.link,onClick:e=>u.linkChange(l.link),class:(0,n.C4)(["menu-link",{"selected-menu-link":u.link===l.link}])},{default:(0,a.k6)((()=>[(0,a.bF)(b,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(w,{name:l.icon},null,8,["name"])])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t(l.label)),1)])),_:2},1024)])),_:2},1032,["to","active","onClick","class"])),[[X]]))),128)),(0,a.bF)(p,{spaced:""}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.menuItems2,(l=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(_,{key:l.link,clickable:"",to:l.to,active:u.link===l.link,onClick:e=>u.linkChange(l.link),class:(0,n.C4)(["menu-link",{"selected-menu-link":u.link===l.link}])},{default:(0,a.k6)((()=>[(0,a.bF)(b,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(w,{name:l.icon},null,8,["name"])])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t(l.label)),1)])),_:2},1024)])),_:2},1032,["to","active","onClick","class"])),[[X]]))),128)),(0,a.bF)(p,{spaced:""}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(u.menuItems3,(l=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)(_,{key:l.link,clickable:"",to:l.to,active:u.link===l.link,onClick:e=>u.linkChange(l.link),class:(0,n.C4)(["menu-link",{"selected-menu-link":u.link===l.link}])},{default:(0,a.k6)((()=>[(0,a.bF)(b,{avatar:""},{default:(0,a.k6)((()=>[(0,a.bF)(w,{name:l.icon},null,8,["name"])])),_:2},1024),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t(l.label)),1)])),_:2},1024)])),_:2},1032,["to","active","onClick","class"])),[[X]]))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.Q3)("",!0),(0,a.bF)(q,{class:"main-page",style:(0,n.Tr)({height:u.q.screen.height,width:u.q.screen.width})},{default:(0,a.k6)((()=>[(0,a.bF)(C)])),_:1},8,["style"]),(0,a.bF)(D,{modelValue:u.loginDialog,"onUpdate:modelValue":l[8]||(l[8]=e=>u.loginDialog=e),"transition-show":"jump-down","transition-hide":"jump-up"},{default:(0,a.k6)((()=>[(0,a.bF)(N,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(L,{class:"bg-accent text-black rounded-borders",style:{height:"50px"}},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,(0,n.v_)(e.$t("index.login")),1),(0,a.bF)(R)])),_:1}),(0,a.bF)(K,{class:"q-pt-md"},{default:(0,a.k6)((()=>[(0,a.bF)(Q,{dense:"",outlined:"",square:"",label:e.$t("index.email"),hint:"Hint: example@tblogistic.com",modelValue:u.loginform.email,"onUpdate:modelValue":l[5]||(l[5]=e=>u.loginform.email=e),onKeyup:(0,i.jR)(u.userLogin,["enter"])},null,8,["label","modelValue","onKeyup"]),(0,a.bF)(Q,{dense:"",outlined:"",square:"",label:e.$t("index.password"),modelValue:u.loginform.password,"onUpdate:modelValue":l[7]||(l[7]=e=>u.loginform.password=e),type:u.isPwd?"password":"text",onKeyup:(0,i.jR)(u.userLogin,["enter"]),class:"q-mt-sm"},{append:(0,a.k6)((()=>[(0,a.bF)(w,{name:u.isPwd?"sym_r_visibility_off":"sym_r_visibility",class:"cursor-pointer",onClick:l[6]||(l[6]=e=>u.isPwd=!u.isPwd)},null,8,["name"])])),_:1},8,["label","modelValue","type","onKeyup"])])),_:1}),(0,a.bF)(W,{align:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{class:"full-width",color:"primary",label:e.$t("index.login"),onClick:u.userLogin},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["style"])}var r=t(1271),d=t(4907),c=t(6308),m=t(555),k=t(3537),g=t(5858),_=t(455),p=t(2261);function b(){const e=(0,d.A)(),l=(0,_.rd)(),t=(0,m.KR)(!1),n=(0,m.KR)(!1),i=(0,m.KR)({email:"",password:""}),o=(0,m.KR)(r.A.getItem("displayName")||null),s=(0,m.KR)(r.A.getItem("userRole")||null),u=(0,m.KR)(r.A.getItem("userId")||null),c=l=>e.notify({message:l,icon:"sym_r_check",color:"positive"}),k=l=>e.notify({message:l,icon:"sym_r_close",color:"negative"}),g=async()=>{if(!i.value.email.trim())return k("Please Enter Email");if(!i.value.password.trim())return k("Please Enter Password");t.value=!0,e.loading.show();try{const e=await(0,p.post)("UserAccount/login/",i.value);"200"===e.code?(r.A.set("accessToken",e.data.access),r.A.set("refreshToken",e.data.refresh),r.A.set("tokenExpiration",e.data.expires_in),r.A.set("displayName",e.data.displayName),r.A.set("auth",!0),r.A.set("userRole",e.data.role),r.A.set("userId",e.data.user_id),o.value=e.data.displayName,s.value=e.data.role,u.value=e.data.user_id,c("Login Successful"),l.push({name:"web_index"}),n.value=!1):k("Login Failed: "+e.data.message)}catch(e){k(`Login Failed: ${e}`)}finally{t.value=!1,e.loading.hide()}},b=()=>{e.loading.show(),console.log("Logging out..."),(0,p.post)("UserAccount/logout/").finally((()=>{["accessToken","refreshToken","displayName","menulink","tokenExpiration","auth","customer","company","goods","goodstype","truck"].forEach(r.A.remove),r.A.remove("userRole"),r.A.remove("userId"),c("Logged Out"),l.push({name:"web_index"}),e.loading.hide(),setTimeout((()=>location.reload()),100)}))},f=async()=>{const e=r.A.getItem("accessToken"),l=r.A.getItem("refreshToken");if(!e||!l)return k("Login Required"),void(n.value=!0);if(!s.value||!u.value){const e=await(0,p.getauth)("UserAccount/userRole");"200"===e?.data?.code||"200"===e?.code?(r.A.set("userRole",e.data.role),r.A.set("userId",e.data.user_id),s.value=e.data.role,u.value=e.data.user_id):(k("Failed to retrieve user role."),k("Please log in again."),n.value=!0,b())}};return(0,a.sV)((()=>{f()})),{loginform:i,loginDialog:n,displayName:o,userId:u,userRole:s,userLogin:g,userLogout:b,checkAuthentication:f}}var f=t(7144);const v={setup(){const{loginform:e,loginDialog:l,displayName:t,userId:n,userRole:i,userLogin:o,userLogout:s,checkAuthentication:u}=b(),{t:p}=(0,k.s9)(),v=(0,d.A)(),h=(0,_.rd)(),y=(0,m.KR)(!1),A=(0,m.KR)(r.A.getItem("device")||""),F=(0,m.KR)(r.A.getItem("deviceName")||""),w=(0,m.KR)(g.i18n.global.locale),I=(0,m.KR)(p("index.webtitle")),x=(0,m.KR)(!0),C=(0,m.KR)(!1),q=(0,m.KR)(r.A.getItem("menulink")||""),R=(0,m.KR)(1),L={class:"bg-blue text-white shadow-4",offset:[10,10],contentStyle:"font-size: 12px"},Q=r.A.getItem("theme");null!==Q&&void 0!==Q&&v.dark.set("dark"===Q);const K=()=>{const e=v.dark.isActive?"light":"dark";v.dark.set("dark"===e),r.A.set("theme",e)},W=(0,m.KR)(["You have a new message","Your order has been shipped","Update available for your app"]),N=(0,m.Kh)([{value:"en-US",label:"English"},{value:"mm",label:"Myanmar"},{value:"zh-CN",label:"Chinese (Simplified)"}]);(0,a.wB)(w,(e=>r.A.set("lang",e)));const D=e=>{w.value=e};console.log(r.A.getItem("userRole"));const T=(0,m.Kh)([{label:"menuItem.receivegoods",link:"ReceiveGoods",to:{name:"ReceiveGoods"},icon:"sym_r_archive"},{label:"menuItem.customer",link:"Customer",to:{name:"CustomerList"},icon:"sym_r_people"},{label:"menuItem.company",link:"CompanyList",to:{name:"CompanyList"},icon:"sym_r_business"},{label:"menuItem.goods",link:"Goods",to:{name:"GoodsList"},icon:"sym_r_inventory_2"},{label:"menuItem.truck",link:"TruckList",to:{name:"TruckList"},icon:"sym_r_local_shipping"}]),$=(0,m.Kh)([{label:"menuItem.inventory",link:"Inventory",to:{name:"InventoryList"},icon:"sym_r_warehouse"},{label:"menuItem.dispatchPlanning",link:"DispatchPlanning",to:{name:"PackageGroupList"},icon:"sym_r_assignment"},{label:"menuItem.truckdispatch",link:"TruckDispatch",to:{name:"TruckDispatchList"},icon:"sym_r_view_agenda"}]),X=(0,m.Kh)([{label:"menuItem.tracking",link:"TrackVehicle",to:{name:"TrackVehicle"},icon:"sym_r_location_on"}]),S=()=>v.screen.height>=380&&v.screen.width>=750,V=()=>{S()||h.push({name:"DeviceNotSupportedError"}),C.value=v.screen.width>=1e3};(0,a.sV)((()=>{V(),window.addEventListener("resize",V),c["default"].on("needlogin",u()),(0,f.Fd)()}));const E=e=>{r.A.set("menulink",e),q.value=e,["rc_detailLink","selectedPG","dispatch_detailLink","truckDispatchData","PackageGroupData","SelectedInventoryItemData","EditSelectedInventoryItemData"].forEach(r.A.remove)};return(0,a.wB)((()=>h.currentRoute.value),(e=>{const l=r.A.getItem("pending_link_change");l&&(r.A.set("menulink",l),r.A.remove("pending_link_change"),q.value=l)}),{immediate:!0}),{q:v,router:h,loading:y,device:A,deviceName:F,lang:w,toggleTheme:K,langOptions:N,title:I,loginform:e,loginDialog:l,displayName:t,userId:n,userRole:i,isPwd:x,userLogin:o,userLogout:s,checkAuthentication:u,drawerleft:C,link:q,current:R,langChange:D,linkChange:E,menuItems1:T,menuItems2:$,menuItems3:X,isDeviceSupported:S,recentNotifications:W,tooltip:L}}};var h=t(2807),y=t(2008),A=t(8416),F=t(6914),w=t(6384),I=t(7410),x=t(9150),C=t(4436),q=t(3999),R=t(124),L=t(3796),Q=t(386),K=t(5173),W=t(3952),N=t(330),D=t(6056),T=t(8958),$=t(492),X=t(5205),S=t(2156),V=t(3316),E=t(8670),P=t(3676),B=t(4189),U=t(9270),z=t(2669),G=t(8672),j=t(9626),H=t(8582),M=t.n(H);const O=(0,h.A)(v,[["render",u]]),Y=O;M()(v,"components",{QLayout:y.A,QHeader:A.A,QToolbar:F.A,QBtn:w.A,QTooltip:I.A,QToolbarTitle:x.A,QMenu:C.A,QList:q.A,QItem:R.A,QItemLabel:L.A,QSeparator:Q.A,QItemSection:K.A,QAvatar:W.A,QImg:N.A,QDrawer:D.A,QScrollArea:T.A,QIcon:$.A,QPageContainer:X.A,QDialog:S.A,QCard:V.A,QBar:E.A,QSpace:P.A,QCardSection:B.A,QInput:U.A,QCardActions:z.A}),M()(v,"directives",{ClosePopup:G.A,Ripple:j.A})}}]);